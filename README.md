# OrbStack VS Code Remote SSH Config 

This documentation describe and explain the steps needed to configure the _SSH Config File_ in VS Code to connect with a newly created Orbstack Virtual Machine (VM). These steps are tested on MacOS. A short summary is provided at the end. 

## Open the VS Code Remote SSH Config File
- On the left panel in VS Code, click on the _Remote Explorer_ icon (<img width="36" height="37" alt="Remote-Explorer-Icon" src="https://github.com/user-attachments/assets/e1be8463-85ab-4dca-a73f-1db182122ae6" />).
- Hover the mouse over _SSH_, a gear icon will appear (<img width="19" height="20" alt="Bildschirmfoto 2025-07-12 um 19 40 09" src="https://github.com/user-attachments/assets/2f967bd9-665f-45ed-bb1b-992b1bd1a2ed" />).
- Click on this gear icon to open the _SSH Config File_.
- The following lines are most likely to be found in the _SSH Config File_:
  
  ```
  # Added by OrbStack: 'orb' SSH host for Linux machines
  # This only works if it's at the top of ssh_config (before any Host blocks).
  # This won't be added again if you remove it.
  Include ~/.orbstack/ssh/config
  ```

## Inspect the OrbStack SSH Config File
- The following block can be found inside ```~/.orbstack/ssh/config```:
  ```
  # AUTO-GENERATED BY ORBSTACK. DO NOT EDIT.
  # To make changes, add or override hosts at the top of ~/.ssh/config
  
  Host orb
    Hostname 127.0.0.1
    Port 32222
    # SSH user syntax:
    #   <container>@orb to connect to <container> as the default user (matching your macOS user)
    #   <user>@<container>@orb to connect to <container> as <user>
    # Examples:
    #   ubuntu@orb: container "ubuntu", user matching your macOS user
    #   root@fedora@orb: container "fedora", user "root"
    User default
    # replace or symlink ~/.orbstack/ssh/id_ed25519 file to change the key
    IdentityFile ~/.orbstack/ssh/id_ed25519
    # only use this key
    IdentitiesOnly yes
    UserKnownHostsFile ~/.orbstack/ssh/known_hosts
    ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
    ProxyUseFdpass yes
  ```
## Update the VS Code Remote SSH Config File
- As can be seen, the _User_ is set as _default_, which refer to the default OrbStack VM, which is usually the VM that was created first.
- For each newly created OrbStack VM, a block with the same structure needs to be added to the _Remote SSH Config File_, **underneath** the line ```Include ~/.orbstack/ssh/config``` to represent that VM.
- The only two parameters that needs to be changed are the _Host_ and the _User_.
  - The _Host_ is just an alias that will appear under the _SSH_ dropdown in the _Remote Explorer_ (<img width="36" height="37" alt="Remote-Explorer-Icon" src="https://github.com/user-attachments/assets/e1be8463-85ab-4dca-a73f-1db182122ae6" />), which can be namde arbitrarily.
  - The _User_ be set as the name of the newly created VM. an example is provided at the end after the Summary.

## Summary
Everytime a new OrbStack VM is created, the following block needs to be added into the _Remote SSH Config File_, **underneath** the line ```Include ~/.orbstack/ssh/config```:
```
  Host <host>
    Hostname 127.0.0.1
    Port 32222
    User <user>
    # replace or symlink ~/.orbstack/ssh/id_ed25519 file to change the key
    IdentityFile ~/.orbstack/ssh/id_ed25519
    IdentitiesOnly yes
    UserKnownHostsFile ~/.orbstack/ssh/known_hosts
    ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
    ProxyUseFdpass yes
  ```
- The block template is copied from the file ```~/.orbstack/ssh/config```, where only the _Host_ and the _User_ need to be changed and everything else should be kept unchanged.
- The _Host_ is just an alias that will appear under the _SSH_ dropdown in the _Remote Explorer_ (<img width="36" height="37" alt="Remote-Explorer-Icon" src="https://github.com/user-attachments/assets/e1be8463-85ab-4dca-a73f-1db182122ae6" />), which can be namde arbitrarily.
- The _User_ be set as the name of the newly created VM. 

## Example
Suppose two VM exists in OrbStack:
- vm1 (default)
- vm2
The _Remote SSH Config File_ should look like this:

 ```
  # Added by OrbStack: 'orb' SSH host for Linux machines
  # This only works if it's at the top of ssh_config (before any Host blocks).
  # This won't be added again if you remove it.
  Include ~/.orbstack/ssh/config

  Host vm2-arbitryname
    Hostname 127.0.0.1
    Port 32222
    User vm2
    # replace or symlink ~/.orbstack/ssh/id_ed25519 file to change the key
    IdentityFile ~/.orbstack/ssh/id_ed25519
    IdentitiesOnly yes
    UserKnownHostsFile ~/.orbstack/ssh/known_hosts
    ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
    ProxyUseFdpass yes
  ```

  


