# OrbStack VS Code Remote SSH Configuration Guide

This guide explains how to configure the **SSH Config File** in **Visual Studio Code (VS Code)** to connect to an OrbStack virtual machine (VM) on **macOS**. A quick summary and example configuration are provided at the end.

---

## Open the SSH Config File in VS Code

1. In **VS Code**, open the **Remote Explorer** by clicking on the following icon in the left sidebar: <img width="36" height="37" alt="Remote Explorer Icon" src="https://github.com/user-attachments/assets/e1be8463-85ab-4dca-a73f-1db182122ae6" />



2. Hover over **SSH** in the **Remote Explorer** panel. A gear icon will appear: <img width="19" height="20" alt="SSH Gear Icon" src="https://github.com/user-attachments/assets/2f967bd9-665f-45ed-bb1b-992b1bd1a2ed" />



3. Click the gear icon and then choose `/Users/<user-name>/.ssh/config` to open the **SSH Config File** (`~/.ssh/config`).
   
   <img width="461" height="127" alt="List" src="https://github.com/user-attachments/assets/a8d4e8b3-413c-4e6f-8625-1fa5ac7c9ef2" />



5. If the file have not been modified before, the following lines are likely to be found:

   ```ssh
   # Added by OrbStack: 'orb' SSH host for Linux machines
   # This only works if it's at the top of ssh_config (before any Host blocks).
   # This won't be added again if you remove it.
   Include ~/.orbstack/ssh/config
   ```

---

## The OrbStack SSH Config File

Inside `~/.orbstack/ssh/config`, a block can be found with the following structure:

```ssh
# AUTO-GENERATED BY ORBSTACK. DO NOT EDIT.
# To make changes, add or override hosts at the top of ~/.ssh/config

Host orb
  Hostname 127.0.0.1
  Port 32222
  # SSH user syntax:
  #   <container>@orb to connect to <container> as the default user (matching your macOS user)
  #   <user>@<container>@orb to connect to <container> as <user>
  # Examples:
  #   ubuntu@orb: container "ubuntu", user matching your macOS user
  #   root@fedora@orb: container "fedora", user "root"
  User default
  IdentityFile ~/.orbstack/ssh/id_ed25519
  IdentitiesOnly yes
  UserKnownHostsFile ~/.orbstack/ssh/known_hosts
  ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
  ProxyUseFdpass yes
```
- As can be seen, the _User_ is set as _default_, which refer to the default OrbStack VM, which is usually the first one that was created.
---

## Update the VS Code SSH Config File

Every time a new OrbStack VM is created, a new block with the same structure as the one in `~/.orbstack/ssh/config` needs to be added in the SSH config file (`~/.ssh/config`) **underneath** the line:

```ssh
Include ~/.orbstack/ssh/config
```

Only two parameters need to be customized:

- `Host`: An alias that appears in the Remote Explorer. Can be **named arbitrarily**.
- `User`: This should be set to the **name of the OrbStack VM/container**.

Keep the rest of the config block identical to the one in `~/.orbstack/ssh/config`.

---

## Summary

For each new VM, add the following block to `~/.ssh/config`:

```ssh
Host <host>
  Hostname 127.0.0.1
  Port 32222
  User <user>
  IdentityFile ~/.orbstack/ssh/id_ed25519
  IdentitiesOnly yes
  UserKnownHostsFile ~/.orbstack/ssh/known_hosts
  ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
  ProxyUseFdpass yes
```
- The block template is copied from the file `~/.orbstack/ssh/config`, where only the _Host_ and the _User_ need to be changed, everything else should be untouched.
- The _Host_ is just an alias that will appear under the _SSH_ dropdown in the _Remote Explorer_ (<img width="36" height="37" alt="Remote-Explorer-Icon" src="https://github.com/user-attachments/assets/e1be8463-85ab-4dca-a73f-1db182122ae6" />), which can be namde arbitrarily.
- The _User_ be set as the name of the newly created VM.


> ⚠️ **Important**: Make sure the `Include ~/.orbstack/ssh/config` line is at the **very top** of the file. If it appears after any `Host` blocks, those blocks may override it.

---

## Example

Assume you have two VMs:

- `vm1` (default)
- `vm2`
  
And the following block are found in the file `~/.orbstack/ssh/config`:
```ssh
Host <host>
    Hostname 127.0.0.1
    Port 32222
    User <user>
    # replace or symlink ~/.orbstack/ssh/id_ed25519 file to change the key
    IdentityFile ~/.orbstack/ssh/id_ed25519
    IdentitiesOnly yes
    UserKnownHostsFile ~/.orbstack/ssh/known_hosts
    ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
    ProxyUseFdpass yes
  ```
Then your `~/.ssh/config` should contain:

```ssh
Include ~/.orbstack/ssh/config

Host somerandomname
  Hostname 127.0.0.1
  Port 32222
  User vm2
  IdentityFile ~/.orbstack/ssh/id_ed25519
  IdentitiesOnly yes
  UserKnownHostsFile ~/.orbstack/ssh/known_hosts
  ProxyCommand '/Applications/OrbStack.app/Contents/Frameworks/OrbStack Helper.app/Contents/MacOS/OrbStack Helper' ssh-proxy-fdpass 501
  ProxyUseFdpass yes
```

---
